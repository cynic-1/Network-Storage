# 银行存储系统设计方案

1. 虚拟化（云）平台 （可考虑直接构建私有云环境）
2. 100%的冗余方案
3. 100TB 每年增长30% 满足3年
4. 业务部门的划分 生产业务区、综合管理区、网银在线区、产品测试区、运维基础区
5. 非结构化数据
6. 网络拓扑设计 带宽 高峰和低谷期
7. 系统设计 硬件冗余和集群
8. RPO接近于0，尽量没有数据丢失，RTO尽可能小
9. 高扩展性，而且以虚拟化部署为主
10. 数据安全 隐私性
11. 容灾规划



**SAS和SATA区别**

机械硬盘主要为SATA和SAS接口，目前家用类别的移动硬盘多为SATA接口，SAS接口则为企业级应用。SAS可满足高性能、高可靠性的应用，SATA则满足大容量、非关键业务的应用。

![SAS盘和SATA盘的区别](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9leHAtcGljdHVyZS5jZG4uYmNlYm9zLmNvbS82NWJhODgwYjMxMjEwNTYxNThjZTFiNWMwOGFlZThkNzU4MmE2YWM2LmpwZw?x-oss-process=image/format,png)



## 一、问题背景

随着金融产业的不断升级，金融信息化已成为金融行业的重要环节。银行在央行与银保监会等机构的监督和管理下，信息化进程逐步加快推进。随着业务的变化和云计算技术的的成熟，应用场景和需求变化越来越难以控制，银行业务高速发展，某500强银行原有平台CDC传统的数据中心解决方案已经满足不了目前的应用需求的大量迭代，同时设备和应用的运维挑战难度极高。如何在技术和业务双层面优化存储系统，成为摆在该银行面前的重要挑战。总部决定构建大中华区全新的虚拟化（云）平台，采用成熟的虚拟化方案构建虚拟化数据中心，需要一套虚拟化实施方案。

## 二、需求分析

### 1. 业务部门划分需求

银行业务可分为五个分区，生产业务区、综合管理区、网银在线区、产品测试区、运维基础区，产生的数据主要都是非结构化数据。为了保证数据的安全，可访问性应根据不同业务进行划分，每个区的权限与资源分配有差别，具体划分如下：

* 生产业务区：生产业务相关数据读写权限；面向客户的核心数据，分配可用性最高的存储资源
* 综合管理区：所有权限；普通的存储资源
* 网银在线区：相关数据读写权限；面向客户的核心数据，分配可用性最高的存储资源
* 产品测试区：测试数据的读写权限；普通的存储资源
* 运维基础区：生产业务区和网银在线区的数据读写权限；普通存储资源

### 2. 带宽需求

需要先由业务制定业务指标（最大并发用户，吞吐量，响应时间等），让性能测试组根据预定业务指标去进行业务系统压力测试，根据业务高峰期时的网络资源使用情况估算下生产环境的网络带宽等网络配置。

### 3. 数据完整性

银行业务系统和办公系统作为主要系统，必须为系统用户提供准确的数据访问服务，故数据的完整性是重要需求。

### 4. 数据可用性与容灾

银行存取款业务需要7*24工作，其他核心业务也要求极高的可用性，数据丢失的代价极大，对于数据保存的要求非常严格，所以设计好系统的高可用性极为重要，必须保证RPO接近于0，尽量没有数据丢失，RTO尽可能小，可以容忍一小段时间的宕机。银行系统产生的用户数据，是银行非常重要的资产，一旦数据损失，后果是灾难性的。为了保证业务的可连续性(BC)，必须对存储系统做好灾备，本地数据备份和异地灾备中心都是非常重要的容灾手段。

### 5. 数据机密性

银行数据都具有很强的隐私性，所以必须保证数据机密性，防止不拥有权限的用户非法访问数据。

### 5. 系统可拓展性

随着银行业务的不断扩大，用户数据的不断累计，所需要的存储空间至少随着线性速度增长，所以存储系统必须具备很高的可扩展性，并且通过虚拟化部署使得扩展过程更简单、快捷。

## 三、目标设计



## 四、存储方案设计

https://blog.51cto.com/u_15127572/2726299

https://www.talkwithtrend.com/Article/253157

要点：**业务部门的划分**

## 五、网络架构设计

要点：**存储网络的架构组成** **网络拓扑**

**新型数据中心：扁平网络拓扑和聚合存储**

转到更扁平网络的数据中心是为了减少交换层次数量，以消除延迟和降低管理复杂性，供应商承诺采用一些预标准技术，如多链路透明互联(TRILL)[和思](https://www.dqsheffield.com/hkhs)科的叠加传输虚拟化(OTV) 来实现这个目标。

这迫使网络工程师和架构师必须仔细了解许多专利技术。这样，他们最终会面临许多新架构和技术选择--这意味在投入资源之前需要进行更多的研究。

为了转到这种新型数据中心网络并实现私有云，架构师还必须使用数据中心桥接、以太网光纤通道(FCoE)或I/O虚拟化技术，来整合数据中心和存储基础构架，从而减少安装[服务器](https://www.dqsheffield.com/server/)机架所需要的布线、网络接口卡(NIC)和主总结适配器。

**使用虚拟化集群交换技术来管理扁平网络**

UCLA神经成像实验室(LONI)对大脑进行绘图，并持续将扫描数据保存到将近PB存储量的影像数据库，1,000名研究人员会不停地访问这个数据库，以了解和治疗老年痴呆症和精神分裂症等疾病。同时上百名研究人员会同时在线处理从20MB至几百GB的数据。

LONI最近实施了一个无阻塞扁平2层协议网络，直接将所有机架服务器相连，但是它所采用的是虚拟集群交换技术，即对顶级机架[交换机](https://www.dqsheffield.com/module/27720.html)进行分组，通过一个虚拟机架将它们进行统一管理，从而提高网络管理效率。

除了高性能数据中心，随着封闭的[企业数据中心](https://www.dqsheffield.com/k/server/2009-6/625322.html)开始在地理上分散各地，虚拟机架在企业网络管理中发挥了中枢作用。目前，大多数集群交换或虚拟机架解决方案的缺点是互操作性不强。

**云网络需要扁平化和以太网结构**

网络供应商认为对于网络而言，简单性和优化要比扁平更为重要。云自动化，即按需分配和收回服务器、存储、网络、应用程序，是非常重要的。

供应商的自动[化工](https://www.dqsheffield.com/industry/1617.html)具和接口根据硬件的不同而不同，特别是专门的交换[操作系统](https://www.dqsheffield.com/module/27659.html)，这就是为什么数据中心内网络的优先级不高。但是通过使用标准来提升互操作性，从而简化数据中心网络的自动化负载分配任务，或者由网络管理员以一个交换机、一个交换结构视图来管理网络基础架构，有利于保证平稳地过渡到以太网结构和未来的开放网络[软件](https://www.dqsheffield.com/industry/1593.html)。





## 六、虚拟化方案

要点：**虚拟化后共享存储容量的规划**



根据统计数据，私有云仍然非常流行，但是什么使它如此出色呢？以下是私有云技术的一些优点：

- 易于掌控
  专用云通常位于现场或数据中心提供商处，因此在需要时更易于访问。您的IT团队可以有效地管理平台并在需要时进行更改。他们可以预测停机时间和服务交付瓶颈。他们还可以更好地根据公司需求调整资源的使用。另一方面，使用公共云的人在管理其资源方面没有那么多的灵活性。
- 稳定性
  云计算在很大程度上取代了硬盘，计算机，闪存驱动器和USB。尽管它仍然使用许多不同类型的驱动器来构建其存储平台，但它还通过将数据分发到安全的托管站点并确保所有内容保持在线状态，从而提供了更高程度的数据安全性。但是，为了获得最佳保护，您需要适当的协议以及全面的灾难恢复和备份解决方案。
  私有云对于存储敏感文件特别方便，因为您的内部团队负责确保平台持续运行。您不必担心供应商或邻居的活动会影响系统，并且可以更有效地管理基础结构。
- 定制化
  您可以按照最适合您和业务需求的方式配置平台。它们可以适应不同规模，行业，间接费用，目标和其他因素的公司。查看您公司的要求，然后根据可用性，安全性和可伸缩性需求，确定最适合您的方案。
- 合规性
  通过完全控制云存储和带宽，自定义环境或调整安全设置的能力，公司可以更好地控制其基础架构。他们可以根据自己的业务目标构建一个符合相关法律和行业法规的平台。与公共云相反，私有云数据更难成为外部检查或恶意截取的对象。

## 七、云化的微服务方案

 微服务架构的核心概念之一就是每个服务都被打包和部署为离散的独立程序。服务实例应迅速启动，服务的每一个实例都是完全相同的。所以服务都将部署到以下某个环境之中. 

       1. 物理机:  缺点：开发人员不能快速提高物理机的容量，并且在多个物理服务器之间水平伸缩微服务的成本很高
       2. 虚拟机镜像:  微服务优点之一就是能够快速启动和关闭微服务实例，以响应可伸缩性和服务故障事件.  微服务可以打包在虚拟机镜像中，然后开发人员可以在IaaS私有或公有云中快速部署和启动服务的多个实例
       3. 虚拟容器 虚拟容器是在虚拟机镜像上部署微服务的自然延伸，使用虚拟容器(如docker)，可以将单个虚拟机隔离成共享相同虚拟机镜像的一系列独立进程

   基于云的微服务以弹性的概念为中心。在需要时，可以在云上几分钟之内快速布置启动新的虚拟机和容器，如服务需求下降，可以关闭虚拟服务器。这样可显著提高应用程序的水平可伸缩性，也使应用程序更有弹性. 

## 八、业务的标准化定制















